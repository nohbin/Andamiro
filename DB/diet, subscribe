--시퀀스 생성
CREATE SEQUENCE subNum_seq
INCREMENT BY 1 
START WITH 1
MINVALUE 1
MAXVALUE 99999
NOCYCLE
CACHE 30 ORDER; 

CREATE SEQUENCE dietNum_seq
INCREMENT BY 1 
START WITH 1
MINVALUE 1
MAXVALUE 99999
NOCYCLE
CACHE 30 ORDER;  

CREATE SEQUENCE dietDetailID_seq
INCREMENT BY 1 
START WITH 1
MINVALUE 1
MAXVALUE 99999
NOCYCLE
CACHE 30 ORDER; 

CREATE SEQUENCE  dietNum_seq START WITH 1 INCREMENT BY 1 nocache;
CREATE SEQUENCE   subNum_seq START WITH 1 INCREMENT BY 1 nocache;
CREATE SEQUENCE   dietDetailID_seq START WITH 1 INCREMENT BY 1 nocache;


--테이블 생성  

CREATE TABLE subscribeMember (
    	subNumber          NUMBER(5)    PRIMARY KEY,
    	membernumber    NUMBER(5),
    	sub_start             DATE  DEFAULT  SYSDATE,
   	sub_end 		DATE  DEFAULT  (SYSDATE + INTERVAL '30' DAY)
);

CREATE TABLE subMemberDiet (
	dietNumber	    number(5)		    PRIMARY KEY,
	subNumber	    number(5)		    NULL,
	diet_kind	    	    varchar(255)		    NOT NULL,
	diet_menu	    varchar(255)		    NOT NULL,
	diet_picture             varchar(255)		    NOT NULL
);
ALTER TABLE submemberdiet RENAME TO diet;

CREATE TABLE dietDetail (
	dietDetailID	number(5)		    PRIMARY KEY,
	dietNumber	number(5)		    NOT NULL,
	foodName	varchar(255)		    NOT NULL,
	kcal	            varchar(255)		    NOT NULL,
	component	varchar(1000)		    NOT NULL
); 




--데이터 추가 
insert into submemberdiet values(dietNum_seq.NEXTVAL,' ','추천식단','아침','rec_1.png');
insert into submemberdiet values(dietNum_seq.NEXTVAL,' ','추천식단','점심','rec_2.png');
insert into submemberdiet values(dietNum_seq.NEXTVAL,' ','추천식단','저녁','rec_3.png');
insert into submemberdiet values(dietNum_seq.NEXTVAL,' ','추천식단','아침','rec_1.png');
insert into submemberdiet values(dietNum_seq.NEXTVAL,' ','추천식단','점심','rec_2.png');


insert into dietDetail values (dietDetailID_seq.nextval, '2','콩밥','264kcal','탄수화물(57.38g), 단백질(5.65g), 지방(0.46g), 당류(0g), 나트륨(564mg)');
insert into dietDetail values (dietDetailID_seq.nextval, '2','감자국','85kcal','	탄수화물(9.39g), 단백질(4.32g), 지방(3.35g), 당류(0.68g), 나트륨(274mg)');
insert into dietDetail values (dietDetailID_seq.nextval, '2','꽁치구이','270kcal','탄수화물(0.2g), 단백질(23.9g), 지방(17.9g), 당류(0g), 나트륨(130mg)');
insert into dietDetail values (dietDetailID_seq.nextval, '2','호박나물','19kcal','탄수화물(1.3g), 단백질(0.5g), 지방(1.4g), 당류(1.3g), 나트륨(2mg)');
insert into dietDetail values (dietDetailID_seq.nextval, '2','백김치','22kcal','탄수화물(4.75g), 단백질(1.21g), 지방(0.19g), 당류(1.43g), 나트륨(454mg)');

--테이블 관계

alter table subscribeMember add CONSTRAINT fk_memberNumber FOREIGN KEY (memberNumber) REFERENCES andamiroMember(memberNumber);
alter table diet add CONSTRAINT fk_subNumber FOREIGN KEY (subNumber) REFERENCES subscribeMember(subNumber);
alter table dietDetail add CONSTRAINT fk_dietNumber FOREIGN KEY (dietNumber) REFERENCES diet(dietNumber);





